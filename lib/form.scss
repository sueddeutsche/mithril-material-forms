@import "./colors";
@import "./units";
@import "./typography";
@import "./input";


@mixin with-form() {
    position: relative;

    .mmf-label {
        color: $mmf-color--dark;
        opacity: $mmf-opacity--secondary;
    }
}


/**
 * Default form styles, controlling label position by classnames. The Markup should look like
 *
 *  <my-form extends with-moving-label>
 *      <label>Moving Title</label>
 *      <input-type>
 *      ...
 * @param {string} input-type   - associated input selector
 */
@mixin with-moving-label($input-type: "input") {

    // move input down by label height
    @if $input-type == "textarea" {
        #{$input-type} {
            margin: $mmf-height-label 0 0 0;
        }
    } @else {
        #{$input-type} {
            padding: $mmf-height-label 0 0 0;
        }
    }

    .mmf-label {
        // set label to top
        width: 100%;
        position: absolute;
        top: 0;
        display: inline-block;
        transition: all $mmf-transition--time ease-in-out;

        color: $mmf-color--dark;
        opacity: $mmf-opacity--secondary;
        font-size: $mmf-text-size--label; // small font-size if not currently a placeholder (but title)

        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
    }

    &.no-error {}
    &.isNotEmpty {}

    &.hasFocus {
        .mmf-label {
            color: $mmf-color--primary;
            opacity: $mmf-opacity--primary;
        }
    }

    &.has-error {
        select,
        input {
            border-color: $mmf-color--error;
        }
        &.hasFocus {
            .mmf-label {
                color: $mmf-color--error;
            }
        }
    }

    &.has-warning {
        select,
        input {
            border-color: $mmf-color--warning;
        }
        &.hasFocus {
            .mmf-label {
                color: $mmf-color--warning;
            }
        }
    }

    &.isEmpty.hasNoFocus {
        .mmf-label {
            transform: translateY($mmf-height-label);
            font-size: 1em;
        }
    }
}
